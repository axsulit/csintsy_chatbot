% Rules for identifying the history of present illness (HPI)

% Define the causes
cause(poor_sanitation).
cause(travel_to_tropical_regions).
cause(contact_with_bodily_fluids).
cause(sexually_active).
cause(contaminated_food_or_beverages).
cause(use_of_illegal_drugs).
cause(has_chronic_liver_diseases).
cause(has_hiv_or_aids).
cause(exposure_to_people_with_TB).
cause(exposure_to_people_with_flu).
cause(living_or_working_in_tight_places).
cause(recently_outdoors_with_poor_sanitation_and_hot_temperatures).
cause(possible_exposure_to_animal_fluids).
cause(recently_contacted_with_soil).
cause(has_chronic_pulmonary_diseases).

%TODO: Redo prompt display to prevent repetitive display
% Identify risks
ask(Cause, Answer) :-
    cause(Cause),
    write(Cause), write('? (yes/no): '),
    read(Answer),
    (member(Answer, [yes, no]) -> ! ; write('Please enter "yes" or "no".'),nl,fail).
    % validate_answer(Answer, Options).


% Ask all the questions and store the positive answers in the knowledge base
ask_history(Patient, Causes) :-
    findall(Cause, (
        %ask(Cause, Answer),
        catch(ask(Cause, Answer), _, write('invalid input')),
        Answer == yes, % Only store positive answers
        assertz(symptom(Patient, Cause))
    ),Causes).
    % FOR CHECKING
    % write(Causes), nl,
    % write('Done with ask_history'),nl.





